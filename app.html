<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#ffffff">
    <meta name="description" content="Checklist de Oficina - App Offline com PDF">
    <link rel="stylesheet" href="styles.css?v=3.2">
    <link rel="stylesheet" href="gestao_oficina.css?v=3.2">
    <link rel="stylesheet" href="gestao_oficina_v2.css?v=1.0.2">
    <link rel="stylesheet" href="logout-style.css">
    <link rel="manifest" href="manifest.json">
    <link rel="apple-touch-icon" href="logo.png">
    <link rel="icon" type="image/png" href="logo.png">
   <title id="titulo-pagina">Sistema de Gest√£o - Oficina</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
    
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>

    <script>
        if (window.FIREBASE_CONFIG && !firebase.apps.length) {
            firebase.initializeApp(window.FIREBASE_CONFIG);
        }

        firebase.auth().onAuthStateChanged((user) => {
            if (!user) {
                window.location.href = 'index.html';
            } else {
                console.log('‚úÖ Usu√°rio autenticado:', user.email);
            }
        });
    </script>
</head>
<body>
    <div class="container">
       <div class="header">
    <div class="logo-container">
        <img id="logo-oficina" src="logo.png" alt="Logo da Oficina">
    </div>
    <div class="header-content">
        <h1 id="nome-oficina">OFICINA</h1>
        <p id="subtitulo-oficina">Checklist de entrada e inspe√ß√£o veicular</p>
        <div class="contato-info">
            <img src="https://upload.wikimedia.org/wikipedia/commons/6/6b/WhatsApp.svg" alt="WhatsApp" class="whatsapp-icon">
            <span id="telefone-oficina">(00) 00000-0000</span>
        </div>
        <div class="endereco-oficina" id="endereco-oficina">
            ENDERE√áO DA OFICINA
        </div>
        <div class="cnpj-oficina" id="cnpj-oficina">
    CNPJ: 00.000.000/0000-00
</div>

                <div class="status-sync">
                    <div class="sync-dot" id="syncStatus"></div>
                    <span id="syncText">Online</span>
                </div>

                <!-- üî• BOT√ÉO DE LOGOUT -->
                <div class="user-info-container">
                    <div class="user-email-badge">
                        <span id="userEmail">Carregando...</span>
                    </div>
                    <button class="btn-logout" onclick="fazerLogout()">
                        Sair
                    </button>
                </div>
            </div>
            <div class="header-badge">v3.3 PRO</div>
        </div>
<div class="tabs">
    <button class="tab-button active" onclick="switchTab('novo-checklist')"><span>‚ûû Novo Checklist</span></button>
    <button class="tab-button" onclick="switchTab('orcamento')"><span>üí∞ Pe√ßas & Servi√ßos</span></button>
    <button class="tab-button" onclick="switchTab('fotos')"><span>üì∏ Fotos</span></button>
    <button class="tab-button" onclick="switchTab('resumo'); atualizarResumoOS()"><span>üìÑ Resumo</span></button>
    <button class="tab-button" onclick="switchTab('historico')"><span>üìã Hist√≥rico</span></button>
    <button class="tab-button" onclick="switchTab('relatorios')"><span>üìä Relat√≥rios</span></button>
    <button class="tab-button" data-tab-gestao><span>üõ†Ô∏è Gest√£o Oficina</span></button>
</div>
        
        <div class="os-info-bar" style="
    background: #f8f9fa;
    border-bottom: 1px solid #ddd;
    padding: 10px 20px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 20px;
">
    <div style="font-size: 13px; font-weight: 600; color: #555;">
        üõ†Ô∏è ORDEM DE SERVI√áO ATUAL
    </div>
    <div id="barraFixaOS" style="
        font-size: 18px; 
        font-weight: 900; 
        color: var(--color-primary); 
        letter-spacing: 1px;
    ">
        -
    </div>
</div>

        <div id="novo-checklist" class="tab-content active">
            <div class="content">
                <div id="successMessage" class="alert alert-success"></div>
                <div id="errorMessage" class="alert alert-error"></div>
                <div id="infoMessage" class="alert alert-info"></div>

               <form id="checklistForm" class="wizard-form">

    <div class="wizard-progress">
        <div class="step-indicator active" onclick="showStep(1)" data-step="1">1. Ve√≠culo</div>
        <div class="step-indicator" onclick="showStep(2)" data-step="2">2. Inspe√ß√£o</div>
        <div class="step-indicator" onclick="showStep(3)" data-step="3">3. Cliente</div>
    </div>

    <div class="wizard-step active" id="step1">
        <div class="section-title">üìã INFORMA√á√ïES DO VE√çCULO</div>

        <div class="veiculo-resumo" id="resumoVeiculoPrincipal">
            <div class="veiculo-resumo-pill">Placa: <strong id="resumoPlaca">-</strong></div>
            <div class="veiculo-resumo-pill">Modelo: <strong id="resumoModelo">-</strong></div>
            <div class="veiculo-resumo-pill">KM: <strong id="resumoKmEntrada">-</strong></div>
            <div class="veiculo-resumo-pill">Data: <strong id="resumoData">-</strong></div>
        </div>

        <div class="form-row">
            <div class="form-group">
                <label for="placa">Placa *</label>
                <input type="text" id="placa" name="placa" placeholder="ABC-1234" maxlength="8" style="text-transform: uppercase;">
            </div>
            <div class="form-group">
                <label for="chassi">Chassi</label>
                <input type="text" id="chassi" name="chassi" placeholder="17 d√≠gitos" maxlength="17">
            </div>
        </div>

        <div class="form-row">
            <div class="form-group">
                <label for="modelo">Modelo</label>
                <input type="text" id="modelo" name="modelo" placeholder="Ex: Fiat Uno">
            </div>
            <div class="form-group">
                <label for="km_entrada">KM Entrada</label>
                <input type="text" id="km_entrada" name="km_entrada" placeholder="150.000">
            </div>
        </div>

        <div class="form-row">
            <div class="form-group">
                <label for="data">Data Entrada</label>
                <input type="date" id="data" name="data">
            </div>
            <div class="form-group">
                <label for="hora">Hora Entrada</label>
                <input type="time" id="hora" name="hora">
            </div>
        </div>

        <div class="form-row">
            <div class="form-group">
                <label for="combustivel">N√≠vel Combust√≠vel</label>
                <select id="combustivel" name="combustivel">
                    <option value="">Selecione...</option>
                    <option value="cheio">Cheio</option>
                    <option value="meio">Meio</option>
                    <option value="1/4">1/4</option>
                    <option value="vazio">Vazio</option>
                </select>
            </div>
            <div class="form-group">
                <label for="km_saida">KM Sa√≠da</label>
                <input type="text" id="km_saida" name="km_saida" placeholder="150.500">
            </div>
        </div>

        <div class="wizard-buttons right">
            <button type="button" class="btn-secondary" onclick="limparFormulario()"> üóëÔ∏è Limpar</button>
            <button type="button" class="btn-primary" onclick="nextStep(2)">Pr√≥ximo ‚ûûÔ∏è</button>
        </div>
    </div>


    <div class="wizard-step" id="step2">
        <div class="section-title">üîç INSPE√á√ÉO VISUAL</div>

        <div class="equip-section">
            <div class="equip-section-title">üîß ACESS√ìRIOS OBRIGAT√ìRIOS</div>
            <div class="checkbox-group">
                <div class="checkbox-item"><input type="checkbox" id="estepe" name="equipamentos" value="ESTEPE"><label for="estepe">ESTEPE</label></div>
                <div class="checkbox-item"><input type="checkbox" id="macaco" name="equipamentos" value="MACACO"><label for="macaco">MACACO</label></div>
                <div class="checkbox-item"><input type="checkbox" id="chave_roda" name="equipamentos" value="CHAVE DE RODA"><label for="chave_roda">CHAVE DE RODA</label></div>
                <div class="checkbox-item"><input type="checkbox" id="triangulo" name="equipamentos" value="TRI√ÇNGULO"><label for="triangulo">TRI√ÇNGULO</label></div>
            </div>
        </div>

        <div class="equip-section">
            <div class="equip-section-title">‚õΩ TIPO COMBUST√çVEL</div>
            <div class="checkbox-group">
                <div class="checkbox-item"><input type="checkbox" id="flex" name="equipamentos" value="FLEX"><label for="flex">FLEX</label></div>
                <div class="checkbox-item"><input type="checkbox" id="gasolina" name="equipamentos" value="GASOLINA"><label for="gasolina">GASOLINA</label></div>
                <div class="checkbox-item"><input type="checkbox" id="etanol" name="equipamentos" value="ETANOL"><label for="etanol">ETANOL</label></div>
                <div class="checkbox-item"><input type="checkbox" id="gnv" name="equipamentos" value="GNV"><label for="gnv">GNV</label></div>
                <div class="checkbox-item"><input type="checkbox" id="diesel" name="equipamentos" value="DIESEL"><label for="diesel">DIESEL</label></div>
            </div>
        </div>

        <div class="equip-section">
            <div class="equip-section-title">üîä ELETR√îNICOS</div>
            <div class="checkbox-group">
                <div class="checkbox-item"><input type="checkbox" id="radio" name="equipamentos" value="R√ÅDIO / MULTIM√çDIA"><label for="radio">R√ÅDIO / MULTIM√çDIA</label></div>
                <div class="checkbox-item"><input type="checkbox" id="alarme_corta" name="equipamentos" value="ALARME / CORTA CORRENTE"><label for="alarme_corta">ALARME / CORTA CORRENTE</label></div>
                <div class="checkbox-item"><input type="checkbox" id="antena" name="equipamentos" value="ANTENA"><label for="antena">ANTENA</label></div>
                <div class="checkbox-item"><input type="checkbox" id="acendedor" name="equipamentos" value="ACENDEDOR/TOMADA 12V"><label for="acendedor">ACENDEDOR/TOMADA 12V</label></div>
            </div>
        </div>

        <div class="equip-section">
            <div class="equip-section-title">‚ö° EL√âTRICOS</div>
            <div class="checkbox-group">
                <div class="checkbox-item"><input type="checkbox" id="vidro_eletrico" name="equipamentos" value="VIDRO EL√âTRICO"><label for="vidro_eletrico">VIDRO EL√âTRICO</label></div>
                <div class="checkbox-item"><input type="checkbox" id="trava_eletrica" name="equipamentos" value="TRAVA EL√âTRICA"><label for="trava_eletrica">TRAVA EL√âTRICA</label></div>
                <div class="checkbox-item"><input type="checkbox" id="buzina" name="equipamentos" value="BUZINA"><label for="buzina">BUZINA</label></div>
                <div class="checkbox-item"><input type="checkbox" id="bateria" name="equipamentos" value="BATERIA"><label for="bateria">BATERIA</label></div>
            </div>
        </div>

        <div class="equip-section">
            <div class="equip-section-title">üõ£Ô∏è RODAS & P√ÅRA-BRISAS</div>
            <div class="checkbox-group">
                <div class="checkbox-item"><input type="checkbox" id="calotas" name="equipamentos" value="CALOTAS"><label for="calotas">CALOTAS</label></div>
                <div class="checkbox-item"><input type="checkbox" id="rodas_liga" name="equipamentos" value="RODAS DE LIGA"><label for="rodas_liga">RODAS DE LIGA</label></div>
                <div class="checkbox-item"><input type="checkbox" id="roda_ferro" name="equipamentos" value="RODA DE FERRO"><label for="roda_ferro">RODA DE FERRO</label></div>
                <div class="checkbox-item"><input type="checkbox" id="para_brisa" name="equipamentos" value="PARABRISA TRINCADO"><label for="para_brisa">P√ÅRA BRISA TRINCADO</label></div>
            </div>
        </div>

        <div class="equip-section">
            <div class="equip-section-title">üì¶ DEMAIS ACESS√ìRIOS</div>
            <div class="checkbox-group">
                <div class="checkbox-item"><input type="checkbox" id="extintor" name="equipamentos" value="EXTINTOR"><label for="extintor">EXTINTOR</label></div>
                <div class="checkbox-item"><input type="checkbox" id="protetor_carter" name="equipamentos" value="PROTETOR DE CARTER"><label for="protetor_carter">PROTETOR DE CARTER</label></div>
                <div class="checkbox-item"><input type="checkbox" id="chave_secreta" name="equipamentos" value="CHAVE SEGREDO (RODA)"><label for="chave_secreta">CHAVE SEGREDO (RODA)</label></div>
                <div class="checkbox-item"><input type="checkbox" id="tapetes" name="equipamentos" value="TAPETES"><label for="tapetes">TAPETES</label></div>
            </div>
        </div>

        <div class="equip-section">
            <div class="equip-section-title">‚≠ê EQUIPAMENTOS PRINCIPAIS</div>
            <div class="checkbox-group">
                <div class="checkbox-item"><input type="checkbox" id="ar" name="caracteristicas" value="AR"><label for="ar">AR</label></div>
                <div class="checkbox-item"><input type="checkbox" id="abs" name="caracteristicas" value="ABS"><label for="abs">ABS</label></div>
                <div class="checkbox-item"><input type="checkbox" id="airbag" name="caracteristicas" value="Air Bag"><label for="airbag">Air Bag</label></div>
            </div>
        </div>

        <div class="form-row">
            <div class="equip-section" style="flex: 1; margin-top: 0;">
                <div class="equip-section-title">üïπÔ∏è C√ÇMBIO</div>
                <div class="checkbox-group">
                    <div class="checkbox-item"><input type="checkbox" id="cambio_auto" name="cambio" value="Autom√°tico"><label for="cambio_auto">AUTOM√ÅTICO</label></div>
                    <div class="checkbox-item"><input type="checkbox" id="cambio_manual" name="cambio" value="Manual"><label for="cambio_manual">MANUAL</label></div>
                </div>
            </div>

            <div class="equip-section" style="flex: 1; margin-top: 0;">
                <div class="equip-section-title">üöú TRA√á√ÉO</div>
                <div class="checkbox-group">
                    <div class="checkbox-item"><input type="checkbox" id="tracao_4x2" name="tracao" value="4x2"><label for="tracao_4x2">4x2</label></div>
                    <div class="checkbox-item"><input type="checkbox" id="tracao_4x4" name="tracao" value="4x4"><label for="tracao_4x4">4x4</label></div>
                </div>
            </div>
        </div>

        <div class="form-row full">
    <div class="form-group">
        <label for="obsInspecao">Observa√ß√µes da inspe√ß√£o</label>
        <textarea id="obsInspecao" name="obsInspecao"
                  placeholder="Ex.: Vazamento de √≥leo no motor, ar condicionado n√£o gela, lanterna traseira quebrada..."
                  style="height: 60px; min-height: 60px;"></textarea>
    </div>
</div>

        <div class="wizard-buttons">
            <button type="button" class="btn-secondary" onclick="prevStep(1)">‚¨ÖÔ∏è Voltar</button>
            <button type="button" class="btn-primary" onclick="nextStep(3)">Pr√≥ximo ‚ûûÔ∏è</button>
        </div>
    </div>


    <div class="wizard-step" id="step3">
        <div class="section-title">üë§ DADOS DO CLIENTE</div>

        <div class="form-row">
            <div class="form-group">
                <label for="nome_cliente">Nome</label>
                <input type="text" id="nome_cliente" name="nome_cliente" placeholder="Nome completo do cliente">
            </div>
            <div class="form-group">
                <label for="cpf_cnpj">CPF / CNPJ</label>
                <input type="text" id="cpf_cnpj" name="cpf_cnpj" placeholder="000.000.000-00" maxlength="18">
            </div>
        </div>

        <div class="form-row full">
            <div class="form-group">
                <label for="endereco_cliente">Endere√ßo Completo</label>
                <textarea id="endereco_cliente" name="endereco_cliente" placeholder="Rua, n√∫mero, bairro, cidade - UF, CEP" style="height: 60px; min-height: 60px;"></textarea>
            </div>
        </div>

        <div class="form-row">
            <div class="form-group">
                <label for="celular_cliente">Celular / WhatsApp</label>
                <input type="tel" id="celular_cliente" name="celular_cliente" placeholder="(31) 99999-9999">
            </div>
            <div class="form-group">
                <label for="telefone2">Telefone 2 (opcional)</label>
                <input type="tel" id="telefone2" name="telefone2" placeholder="(31) 9999-9999">
            </div>
        </div>

        <div class="section-title">üîß SERVI√áOS SOLICITADOS</div>

        <div class="form-row full">
            <div class="form-group">
                <label for="servicos">Descreva os servi√ßos solicitados:</label>
                <textarea id="servicos" name="servicos" placeholder="Ex: Troca de √≥leo e filtro, alinhamento e balanceamento..."></textarea>
            </div>
        </div>

        <div class="wizard-buttons">
            <button type="button" class="btn-secondary" onclick="prevStep(2)">‚¨ÖÔ∏è Voltar</button>
<button type="button" class="btn-primary" onclick="switchTab('orcamento')">Ir para Pe√ßas & Servi√ßos ‚ûûÔ∏è</button>
        </div>
    </div>

</form>
            </div>
        </div>

        <div id="historico" class="tab-content">
            <div class="content">
                <div class="search-box">
                    <input type="text" id="searchInput" placeholder="üîç Buscar por placa, modelo ou cliente..." onkeyup="filtrarChecklists()">
                    <button class="btn-primary btn-small" id="btnSync" onclick="sincronizarChecklists()" style="background-color: #27ae60;">üîÑ Sincronizar Nuvem</button>
                    <button class="btn-secondary btn-small" onclick="ordenarChecklists()">üìä Ordenar</button>
                </div>

                <div id="checklistsList"></div>
                <div id="emptyMessage" style="text-align: center; padding: 40px; color: #999;">
                    <p style="font-size: 40px; margin-bottom: 10px;">üì¨</p>
                    <p>Nenhum checklist salvo ainda. Crie um novo para come√ßar!</p>
                </div>
            </div>
        </div>

        <div id="relatorios" class="tab-content">
            <div class="content">
                <div class="section-title">üìä ESTAT√çSTICAS GERAIS</div>
                <div class="stats-box">
                    <div class="stat-card">
                        <div class="stat-number" id="totalChecklists">0</div>
                        <div class="stat-label">Checklists Salvos</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="checklistsMes">0</div>
                        <div class="stat-label">Checklists M√™s Atual</div>
                    </div>
                </div>

                <div class="section-title">üöó MARCAS MAIS ATENDIDAS</div>
                <div id="graficoMarcas" style="margin-top: 20px;"></div>

                <div class="action-buttons">
                    <button class="btn-primary" onclick="exportarDados()">üíæ Exportar Todos (JSON)</button>
                    <button class="btn-danger" onclick="limparTodosDados()">üóëÔ∏è Limpar Hist√≥rico</button>
                </div>
            </div>
        </div>

        <div id="orcamento" class="tab-content">
            <div class="content">
                <div class="section-title">üí∞ PE√áAS & SERVI√áOS</div>

                <div class="veiculo-resumo" id="resumoVeiculoOrcamento">
                    <div class="veiculo-resumo-pill">Placa: <strong id="resumoPlaca2">-</strong></div>
                    <div class="veiculo-resumo-pill">Modelo: <strong id="resumoModelo2">-</strong></div>
                    <div class="veiculo-resumo-pill">Chassi: <strong id="resumoChassi2">-</strong></div>
                    <div class="veiculo-resumo-pill">KM Entrada: <strong id="resumoKmEntrada2">-</strong></div>
                    <div class="veiculo-resumo-pill">Complexidade: <strong id="resumoComplexidade">-</strong></div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="complexidade">Tipo de evento</label>
                        <select id="complexidade" name="complexidade">
                            <option value="">Selecione...</option>
                            <option value="Evento pequeno">Evento pequeno</option>
                            <option value="Evento m√©dio">Evento m√©dio</option>
                            <option value="Evento grande">Evento grande</option>
                        </select>
                    </div>
                </div>

<div class="form-row">
    <div class="form-group">
        <label>Tipo do Item:</label>
        <div class="checkbox-group" style="margin-top: 5px;">
            <div class="checkbox-item">
                <input type="radio" id="tipoPeca" name="tipoItem" value="peca" checked>
                <label for="tipoPeca">Pe√ßa</label>
            </div>
            <div class="checkbox-item">
                <input type="radio" id="tipoServico" name="tipoItem" value="servico">
                <label for="tipoServico">Servi√ßo</label>
            </div>
        </div>
    </div>
</div>

<div class="form-row two">
    <div class="form-group">
        <label for="descricaoItem">Descri√ß√£o</label>
        <textarea id="descricaoItem" rows="1" placeholder="Ex: Pastilha de Freio/M√£o de obra (Enter)..."></textarea>
    </div>
    <div class="form-group">
        <label for="valorItem">Valor (R$)</label>
        <input type="number" id="valorItem" step="0.01" min="0" placeholder="0,00">
    </div>
</div>

<div class="form-row">
    <div class="form-group">
<button type="button" class="btn-primary" id="btnAdicionarItem" onclick="adicionarItemManual()">
    ‚ûû Adicionar
</button>

    </div>
</div>

<div style="margin-top:20px;">
    
    <h4 style="border-bottom: 2px solid #0056b3; padding-bottom: 5px; color: #333;">üî© Pe√ßas</h4>
    <table style="width:100%; border-collapse:collapse; font-size:13px; margin-bottom: 10px;">
        <thead>
            <tr style="background:#f7f7f7;">
                <th style="border:1px solid #ddd; padding:6px; text-align:left;">Descri√ß√£o</th>
                <th style="border:1px solid #ddd; padding:6px; text-align:right; width: 100px;">Valor</th>
                <th style="border:1px solid #ddd; padding:6px; text-align:center; width: 50px;">A√ß√µes</th>
            </tr>
        </thead>
        <tbody id="tabelaPecas"></tbody>
        <tfoot>
            <tr>
                <td style="border:1px solid #ddd; padding:6px; text-align:right; font-weight:bold;">Total Pe√ßas:</td>
                <td id="totalPecas" style="border:1px solid #ddd; padding:6px; text-align:right; font-weight:bold; color: #0056b3;">R$ 0,00</td>
                <td></td>
            </tr>
        </tfoot>
    </table>

    <h4 style="border-bottom: 2px solid #e41616; padding-bottom: 5px; color: #333; margin-top: 25px;">üîß Servi√ßos</h4>
    <table style="width:100%; border-collapse:collapse; font-size:13px; margin-bottom: 10px;">
        <thead>
            <tr style="background:#f7f7f7;">
                <th style="border:1px solid #ddd; padding:6px; text-align:left;">Descri√ß√£o</th>
                <th style="border:1px solid #ddd; padding:6px; text-align:right; width: 100px;">Valor</th>
                <th style="border:1px solid #ddd; padding:6px; text-align:center; width: 50px;">A√ß√µes</th>
            </tr>
        </thead>
        <tbody id="tabelaServicos"></tbody>
        <tfoot>
            <tr>
                <td style="border:1px solid #ddd; padding:6px; text-align:right; font-weight:bold;">Total Servi√ßos:</td>
                <td id="totalServicos" style="border:1px solid #ddd; padding:6px; text-align:right; font-weight:bold; color: #e41616;">R$ 0,00</td>
                <td></td>
            </tr>
        </tfoot>
    </table>

    <div style="background: #eee; padding: 15px; border-radius: 8px; margin-top: 20px; text-align: right;">
        <span style="font-size: 14px; font-weight: bold; color: #555;">TOTAL GERAL (Pe√ßas + Servi√ßos):</span>
        <div id="totalGeralFinal" style="font-size: 24px; font-weight: bold; color: #28a745;">R$ 0,00</div>
    </div>

</div>
                <div class="action-buttons">
<button type="button" class="btn-success" onclick="switchTab('resumo'); atualizarResumoOS()">üìÑ Ver Resumo & Imprimir</button>
                </div>
            </div>
        </div>
<div id="fotos" class="tab-content">
    <div class="content">
        <div class="section-title">üì∏ FOTOS DO VE√çCULO</div>

        <div style="
            background-color: #fff3cd; 
            border: 1px solid #ffeeba; 
            color: #856404; 
            padding: 15px; 
            border-radius: 6px; 
            margin-bottom: 20px; 
            text-align: center;
            font-size: 14px;
        ">
            <strong>‚ö†Ô∏è Aten√ß√£o:</strong> As fotos s√£o salvas <u>apenas neste dispositivo</u>!<br>
            Para backup, envie para o <strong>WhatsApp</strong> ou salve no <strong>Google Drive</strong>.
        </div>
        
        <div class="veiculo-resumo" id="resumoVeiculoFotos">
            <div class="veiculo-resumo-pill">Placa: <strong id="resumoPlaca3">-</strong></div>
            <div class="veiculo-resumo-pill">Modelo: <strong id="resumoModelo3">-</strong></div>
            <div class="veiculo-resumo-pill">Chassi: <strong id="resumoChassi3">-</strong></div>
            <div class="veiculo-resumo-pill">KM: <strong id="resumoKmFotos">-</strong></div>
        </div>

        <div class="form-row">
            <div class="form-group">
                <button type="button" class="btn-primary" onclick="iniciarCamera()">üì∑ Tirar Foto</button>
            </div>
            <div class="form-group">
                <input type="file" id="uploadFotos" multiple accept="image/*" onchange="adicionarFotos(event)">
                <label for="uploadFotos" class="btn-secondary" style="cursor:pointer; padding:12px 24px; display:block; text-align:center;">üìÅ Galeria</label>
            </div>
        </div>

        <div class="camera-container" style="display:none;">
            <video id="cameraPreview" autoplay playsinline style="width:100%; max-width:400px; height:300px; border-radius:12px; border:3px solid #e41616; background:#000;"></video>
            <div style="display:flex; gap:10px; justify-content:center; margin-top:10px;">
                <button class="btn-success btn-small" onclick="tirarFoto()" id="btnTirarFoto" style="display:none;">üì∏ Capturar</button>
                <button class="btn-secondary btn-small" onclick="pararCamera()">‚ùå Cancelar</button>
            </div>
        </div>

        <div class="section-title">Galeria de Fotos (M√°x 15)</div>
        <div id="galeriaFotos" class="fotos-grid"></div>

        <div class="action-buttons">
            <button type="button" class="btn-success" onclick="gerarPDFFotos()">üìÑ PDF Fotos</button>
            <button type="button" class="btn-danger" onclick="limparFotos()">üóëÔ∏è Limpar Fotos</button>
        </div>
    </div>
</div>

    </div>
<div id="resumo" class="tab-content">
  <div class="content">
    
    <div id="resumoContainer" class="os-paper">
      
      <div id="template-cabecalho" class="os-header">
        <div class="os-header-left">
          <img id="logoResumo" src="" alt="Logo" class="os-logo">
          <div class="os-empresa-dados">
            <div id="nomeOficinaResumo" class="os-oficina-nome">NOME DA OFICINA</div>
            <div id="enderecoOficinaResumo" class="os-oficina-sub">Endere√ßo da oficina</div>
<div class="os-oficina-sub">
    <img src="whatsapp.png" alt="WhatsApp" class="whatsapp-icon">
    <span id="telefoneOficinaResumo">00 00000-0000</span>
</div>
            <div id="cnpjOficinaResumo" class="os-oficina-sub">CNPJ da oficina</div>
          </div>
        </div>
        <div class="os-header-right">
          <div class="os-label-os">ORDEM DE SERVI√áO</div>
          <div id="osNumero" class="os-numero-os">00000000</div>
        </div>
      </div>

      <div class="os-grid-2">
        <div class="os-box">
          <div class="os-box-title">CLIENTE</div>
          <div class="os-line"><strong>Nome:</strong> <span id="rNomeCliente"></span></div>
          <div class="os-line"><strong>CPF/CNPJ:</strong> <span id="rCpfCnpj"></span></div>
          <div class="os-line"><strong>Tel:</strong> <span id="rCelular"></span></div>
        </div>
        <div class="os-box">
          <div class="os-box-title">VE√çCULO</div>
          <div class="os-line"><strong>Ve√≠culo:</strong> <span id="rModelo"></span> <span id="rPlaca" style="background:#eee; padding:0 4px; border-radius:3px; font-weight:bold;"></span></div>
          <div class="os-line"><strong>Chassi:</strong> <span id="rChassi"></span></div>
          <div class="os-line"><strong>KM:</strong> <span id="rKmEntrada"></span> | <strong>Comb:</strong> <span id="rCombustivel"></span></div>
          <div class="os-line"><strong>Data:</strong> <span id="rEntradaDataHora"></span></div>
        </div>
      </div>

      <div class="os-box mt-10">
        <div class="os-box-title">SERVI√áOS SOLICITADOS</div>
        <div id="rServicos" class="os-text-area"></div>
      </div>

      <div class="os-box mt-10">
        <div class="os-box-title">INSPE√á√ÉO DE ENTRADA</div>
        <div id="rChecklistBadges" class="os-badges-area">
        </div>
      </div>
        
<div class="os-box mt-10">
    <div class="os-box-title">OBSERVA√á√ïES DA INSPE√á√ÉO</div>
    <div id="rObsInspecao" class="os-text-area">-</div>
</div>

       <div id="template-assinaturas" class="os-assinaturas">
        <div class="os-assina-box">Assinatura do Cliente</div>
        <div class="os-assina-box">Assinatura do T√©cnico</div>
      </div>

<div class="os-footer">
    <span id="rodape-texto-1">Carregando...</span>
</div>

<div class="force-page-break"></div>


<div class="os-header" id="header-pag2">
</div>

<div id="containerTabelasOrcamento">
</div>

      <div class="os-total-row">
        <span>TOTAL GERAL:</span>
        <span id="rTotalGeral" class="os-total-value">R$ 0,00</span>
      </div>
        
<div class="os-assinaturas" id="assinaturas-pag2">
    <div class="os-assina-box">Assinatura do Cliente</div>
    <div class="os-assina-box">Assinatura do T√©cnico</div>
</div>

<div class="os-footer">
    <span id="rodape-texto-2">Carregando...</span>
</div>



    </div>

<div class="action-buttons no-pdf">
      <button type="button" class="btn-success" onclick="gerarPDFResumo()">üìÇ Baixar PDF</button>
       <button type="button" class="btn-primary" onclick="salvarChecklist()" style="background: #27ae60 !important;">üíæ Salvar Completo</button>
    </div>

  </div>
</div>

<div id="gestao-oficina" class="tab-content">
    <div class="content">
        <div class="page-header">
            <h2>üõ†Ô∏è Gest√£o da Oficina</h2>
            <button class="btn-primary" data-btn-nova-os>‚ûû Nova OS</button>
        </div>
        
        <div id="painel-controle"></div>
        
        <div id="resumoTopo" class="resumo-cards"></div>
        
        <div id="kanban-view" class="kanban-container">
            <div class="kanban-coluna">
                <h3>üìÖ Agendados Hoje</h3>
                <div class="cards-container" id="recebido"></div>
            </div>
            <div class="kanban-coluna">
                <h3>üîß Em Andamento</h3>
                <div class="cards-container" id="em_andamento"></div>
            </div>
            <div class="kanban-coluna">
                <h3>‚úÖ Finalizados Hoje</h3>
                <div class="cards-container" id="finalizado"></div>
            </div>
        </div>
    </div>
</div>

<script src="config.js?v=3.3"></script>

<script>
    if (window.FIREBASE_CONFIG && !window.firebase?.apps?.length) {
        window.firebase.initializeApp(window.FIREBASE_CONFIG);
        console.log("üî• Firebase App GLOBAL inicializado!");
    }
</script>

<script src="app.js?v=3.3"></script>
<script src="core_utils.js?v=3.3"></script>
<script src="firebase.js?v=1.0.0"></script>
<script src="checklist.js?v=3.3"></script>
<script src="gestao_oficina.js?v=3.3"></script>
<script src="gestao_oficina_v2.js?v=1.0.2"></script>
<script src="gestao_oficina_agendamentos.js?v=1.0.2"></script>
<script src="gestao_oficina_financeiro.js?v=1.0.2"></script>
<script src="gestao_oficina_recibos.js?v=1.0.2"></script>

<script src="gestao_oficina_os.js?v=1.0.0"></script>
<script src="gestao_oficina_checklist.js?v=1.0.0"></script>
<script src="gestao_oficina_clientes.js?v=1.0.0"></script>
<script src="gestao_oficina_estoque.js?v=1.0.0"></script>

<script src="gestao_oficina_dashboard.js?v=2.0.0"></script>

<script src="kanban_manager.js?v=3.3"></script>

<script src="tabs_init.js?v=3.3"></script>

<script type="module" src="gestao_oficina_firebase.js?v=3.3"></script>

<script src="v2-modules-expose.js?v=1.0.0"></script>

<script src="gestao_oficina_init.js?v=1.0.0"></script>

<!-- üî• LOGOUT MANAGER -->
<script src="logout.js?v=1.0"></script>

<!-- üî• SESSION MANAGER - LIMITE DE SESS√ïES -->
<script src="session-manager.js?v=1.0"></script>

<div class="os-footer" id="rRodape" style="position: fixed; bottom: 0; left: 0; right: 0; width: 100%; text-align: center; font-size: 10px; background: #f8f9fa; padding: 8px 12px; border-top: 2px solid var(--color-primary); z-index: 9999; box-sizing: border-box; font-family: Arial, sans-serif;">
    <span id="rodape-texto">Developed by Hallz Branding 3199676-6963</span>
</div>

<script>
  window.__GESTAO_V2_BUILD__ = 'v3.3-session-limit';
  console.log('‚úÖ Gest√£o V3.3 build ativo:', window.__GESTAO_V2_BUILD__);
</script>

</body>
</html>